<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modern Mobile Shop</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
body{margin:0;padding:0;font-family:Arial,sans-serif;background:#fff}
header.hero{background:#0ea5a4;color:#fff;padding:12px;text-align:center;font-weight:700;font-size:18px}
.search-row{padding:12px}
.search{display:flex;align-items:center;border:1px solid #e6eef6;border-radius:8px;position:relative;background:#f8fafc}
.search input{flex:1;padding:10px 36px 10px 36px;border:none;background:transparent;outline:none}
.search .icon-left{position:absolute;left:10px;color:#94a3b8}
.search .icon-right{position:absolute;right:6px;display:flex;gap:4px}
.tabs{display:flex;margin:5px 0}
.tabs .tab{flex:1;margin:5px;border-radius:5px;padding:8px;background:#e6eef6;border:none;color:#0f172a;font-weight:500}
.tabs .tab.active{background:#0ea5a4;color:#fff}
.product-card{border:1px solid #e6eef6;border-radius:12px;margin:10px;padding:10px;overflow:hidden}
.product-info{display:flex;justify-content:space-between;align-items:center;margin-top:8px;gap:10px}
.product-info span{font-weight:700}
.buy{display:block;width:100%;margin-top:8px;padding:10px;background:linear-gradient(90deg,#0ea5a4,#34d399);border:none;color:#fff;font-weight:700;border-radius:10px;text-align:center}
#toTop{position:fixed;bottom:80px;right:16px;padding:10px 12px;border:none;border-radius:50%;background:#0ea5a4;color:#fff;font-size:18px;display:none}
footer{padding:12px;text-align:center;font-size:12px;color:#64748b;border-top:1px solid #e6eef6}
/* Modal */
#buyModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999}
#modalBackdrop{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.3)}
#modalSheet{position:absolute;bottom:0;width:100%;max-height:90%;background:#fff;border-radius:12px 12px 0 0;display:flex;flex-direction:column}
#modalContent{overflow:auto;flex:1;padding:12px}
#modalFooter{position:sticky;bottom:0;background:linear-gradient(180deg, rgba(255,255,255,0), #fff);padding:10px;border-top:1px solid #eef2f7;display:flex;gap:8px}
</style>
</head>
<body>

<header class="hero">Modern Shop</header>

<div class="search-row">
<div class="search">
<span class="icon-left"><i class="fas fa-search"></i></span>
<input id="searchInput" placeholder="Search products...">
<div class="icon-right">
<button id="clearSearch"><i class="fas fa-xmark"></i></button>
<button id="submitSearch"><i class="fas fa-arrow-right"></i></button>
</div>
</div>
</div>

<div class="tabs" id="tabs">
<button class="tab active" data-type="all">All</button>
<button class="tab" data-type="swimsuit">Swimsuit</button>
<button class="tab" data-type="bikini">Bikini</button>
<button class="tab" data-type="3pc">3PC</button>
<button class="tab" data-type="kids">Kids</button>
</div>

<main id="list"></main>
<div class="controls"><button id="loadMore" class="btn-ghost">Load more</button></div>
<button id="toTop">↑</button>
<footer>© 2025 Modern Shop — All rights reserved</footer>

<!-- Modal -->
<div id="buyModal">
  <div id="modalBackdrop"></div>
  <div id="modalSheet">
    <div style="padding:12px 14px;border-bottom:1px solid #eef2f7;display:flex;align-items:center;justify-content:space-between">
      <div style="font-weight:700">Order</div>
      <button id="closeModal" style="border:0;background:transparent;font-size:18px;color:#475569">&times;</button>
    </div>
    <div id="modalContent">
      <img id="modalImage" src="" alt="Product Image" style="width:100%;border-radius:12px;margin-bottom:10px;object-fit:cover">
      <div id="mName" style="font-weight:700;font-size:16px"></div>
      <div id="mDesc" style="font-size:13px;color:#64748b;margin-bottom:10px"></div>
      <div style="display:flex;gap:8px;margin-bottom:10px;align-items:center">
        <div style="flex:1">
          <label style="font-size:13px;color:#475569">Size</label>
          <select id="mSize" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;background:#fff;font-size:14px"></select>
        </div>
        <div style="width:110px">
          <label style="font-size:13px;color:#475569">Quantity</label>
          <div style="display:flex;align-items:center;margin-top:6px">
            <button id="decQty" style="width:36px;height:36px;border-radius:10px;border:1px solid #e6eef6;background:#f8fafc">-</button>
            <div id="qty" style="flex:1;text-align:center;font-weight:700">1</div>
            <button id="incQty" style="width:36px;height:36px;border-radius:10px;border:1px solid #e6eef6;background:#f8fafc">+</button>
          </div>
        </div>
      </div>
      <div style="margin-bottom:10px">
        <label style="font-size:13px;color:#475569">Your name</label>
        <input id="buyerName" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;margin-top:6px" />
      </div>
      <div style="margin-bottom:10px">
        <label style="font-size:13px;color:#475569">Phone</label>
        <input id="buyerPhone" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;margin-top:6px" placeholder="eg. 0977XXXXXX" />
      </div>
      <div style="margin-bottom:10px">
        <label style="font-size:13px;color:#475569">Address</label>
        <input id="buyerAddress" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;margin-top:6px" />
      </div>
      <div style="margin-bottom:72px">
        <label style="font-size:13px;color:#475569">Extra instructions</label>
        <textarea id="buyerNotes" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;margin-top:6px;min-height:60px"></textarea>
      </div>
    </div>
    <div id="modalFooter">
      <button id="sendWhatsApp" style="flex:1;background:linear-gradient(90deg,#0ea5a4,#34d399);border:0;padding:12px;border-radius:10px;color:white;font-weight:700">Send to WhatsApp</button>
    </div>
  </div>
</div>

<script>
// Sample products
const products = [
  {name:'Red Dress', price:'500', desc:'Stylish red dress', sizes:['S','M','L'], image:'https://via.placeholder.com/300x400'},
  {name:'Blue Top', price:'350', desc:'Casual blue top', sizes:['S','M','L'], image:'https://via.placeholder.com/300x400'},
  {name:'Green Skirt', price:'400', desc:'Elegant green skirt', sizes:['S','M','L'], image:'https://via.placeholder.com/300x400'},
  {name:'Black Pants', price:'600', desc:'Comfortable black pants', sizes:['S','M','L'], image:'https://via.placeholder.com/300x400'},
  {name:'White Shirt', price:'450', desc:'Classic white shirt', sizes:['S','M','L'], image:'https://via.placeholder.com/300x400'}
];

const list = document.getElementById('list');
function renderProducts(prods){
  list.innerHTML = '';
  prods.forEach(p => {
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `
      <img src="${p.image}" style="width:100%;border-radius:12px;object-fit:cover">
      <div class="product-info">
        <span>${p.name}</span>
        <span>⭐ 4.5</span>
      </div>
      <div style="text-align:center;margin:6px 0">K${p.price}</div>
      <button class="buy" 
        data-name="${p.name}" 
        data-price="${p.price}" 
        data-desc="${p.desc}" 
        data-sizes="${p.sizes.join(',')}" 
        data-image="${p.image}">Buy</button>
    `;
    list.appendChild(card);
  });
}
renderProducts(products);

// Tabs filter
const tabs = document.querySelectorAll('.tab');
tabs.forEach(tab=>{
  tab.addEventListener('click',()=>{
    tabs.forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    const type = tab.dataset.type;
    if(type==='all') renderProducts(products);
    else renderProducts(products.filter(p=>p.name.toLowerCase().includes(type)));
  });
});

// Modal logic
let currentProduct=null, quantity=1;
const modal=document.getElementById('buyModal');
const modalImage=document.getElementById('modalImage');
const mName=document.getElementById('mName');
const mDesc=document.getElementById('mDesc');
const mSize=document.getElementById('mSize');
const qtyEl=document.getElementById('qty');
const decQty=document.getElementById('decQty');
const incQty=document.getElementById('incQty');
const buyerName=document.getElementById('buyerName');
const buyerPhone=document.getElementById('buyerPhone');
const buyerAddress=document.getElementById('buyerAddress');
const buyerNotes=document.getElementById('buyerNotes');
const sendBtn=document.getElementById('sendWhatsApp');
const closeModal=document.getElementById('closeModal');

document.addEventListener('click',(e)=>{
  const btn=e.target.closest('.buy');
  if(!btn) return;
  const product={
    name: btn.dataset.name,
    price: btn.dataset.price,
    desc: btn.dataset.desc,
    sizes: (btn.dataset.sizes||'').split(',').map(s=>s.trim()).filter(Boolean),
    image: btn.dataset.image
  };
  openBuyModal(product);
});

function openBuyModal(product){
  currentProduct=product;
  modalImage.src=product.image||'';
  quantity=1; qtyEl.textContent=quantity;
  mSize.innerHTML='';
  (product.sizes||[]).forEach(s=>{const opt=document.createElement('option'); opt.value=s; opt.textContent=s; mSize.appendChild(opt);});
  updatePriceDisplay();
  mDesc.textContent=product.desc||'';
  modal.style.display='block';
  modal.scrollTop=0;
  setTimeout(()=>buyerName.focus(),300);
}
function closeBuyModal(){ modal.style.display='none'; }
closeModal.addEventListener('click', closeBuyModal);

incQty.addEventListener('click',()=>{ quantity++; qtyEl.textContent=quantity; updatePriceDisplay(); });
decQty.addEventListener('click',()=>{ if(quantity>1){ quantity--; qtyEl.textContent=quantity; updatePriceDisplay();} });
function updatePriceDisplay(){ if(!currentProduct) return; const base=parseFloat((currentProduct.price||'0').replace(/[^0-9\\.]/g,'')); const total=base*quantity; mName.textContent=`${currentProduct.name} • K${total}`; }

sendBtn.addEventListener('click',()=>{
  if(!buyerName.value.trim()){alert('Please enter your name'); return;}
  if(!buyerPhone.value.trim()){alert('Please enter your phone'); return;}
  const size=mSize.value||'';
  const message=`Order: ${currentProduct.name} - ${currentProduct.price}%0ASize: ${size}%0AQuantity: ${quantity}%0A%0ACustomer: ${buyerName.value}%0APhone: ${buyerPhone.value}%0AAddress: ${buyerAddress.value}%0ANotes: ${buyerNotes.value}%0A%0AThanks!`;
  window.open('https://wa.me/260770304374?text='+encodeURIComponent(message),'_blank');
  closeBuyModal();
});

// Scroll to top
const toTop=document.getElementById('toTop');
window.addEventListener('scroll',()=>{ if(window.scrollY>200) toTop.style.display='block'; else toTop.style.display='none'; });
toTop.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));

// Search
const searchInput=document.getElementById('searchInput');
const submitSearch=document.getElementById('submitSearch');
const clearSearch=document.getElementById('clearSearch');

function doSearch(){
  const term=searchInput.value.trim().toLowerCase();
  if(!term){ renderProducts(products); return; }
  const results=products.filter(p=>p.name.toLowerCase().includes(term) || p.desc.toLowerCase().includes(term));
  renderProducts(results);
}
submitSearch.addEventListener('click',doSearch);
clearSearch.addEventListener('click',()=>{ searchInput.value=''; renderProducts(products); });
searchInput.addEventListener('keypress',e=>{ if(e.key==='Enter'){e.preventDefault(); doSearch();} });
</script>

</body>
</html>
